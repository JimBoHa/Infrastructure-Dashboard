/* tslint:disable */
/* eslint-disable */
/**
 * Farm Dashboard Core Server
 * No description provided (generated by Openapi Generator https://github.com/openapitools/openapi-generator)
 *
 * The version of the OpenAPI document: 0.1.0
 * 
 *
 * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
 * https://openapi-generator.tech
 * Do not edit the class manually.
 */


import * as runtime from '../runtime';
import type {
  AppSettingsBundle,
  AppSettingsImportResponse,
  BackupRunResponse,
  BackupSummary,
  RestoreRequest,
  RestoreResponse,
  RetentionConfigResponse,
  RetentionUpdateRequest,
} from '../models/index';
import {
    AppSettingsBundleFromJSON,
    AppSettingsBundleToJSON,
    AppSettingsImportResponseFromJSON,
    AppSettingsImportResponseToJSON,
    BackupRunResponseFromJSON,
    BackupRunResponseToJSON,
    BackupSummaryFromJSON,
    BackupSummaryToJSON,
    RestoreRequestFromJSON,
    RestoreRequestToJSON,
    RestoreResponseFromJSON,
    RestoreResponseToJSON,
    RetentionConfigResponseFromJSON,
    RetentionConfigResponseToJSON,
    RetentionUpdateRequestFromJSON,
    RetentionUpdateRequestToJSON,
} from '../models/index';

export interface DownloadBackupRequest {
    nodeId: string;
    date: string;
}

export interface ExportDatabaseRequest {
    format?: string | null;
    scope?: string | null;
}

export interface ImportAppSettingsRequest {
    appSettingsBundle: AppSettingsBundle;
}

export interface ListBackupsForNodeRequest {
    nodeId: string;
}

export interface RestoreBackupRequest {
    restoreRequest: RestoreRequest;
}

export interface UpdateRetentionRequest {
    retentionUpdateRequest: RetentionUpdateRequest;
}

/**
 * 
 */
export class BackupsApi extends runtime.BaseAPI {

    /**
     */
    async downloadBackupRaw(requestParameters: DownloadBackupRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<string>> {
        if (requestParameters['nodeId'] == null) {
            throw new runtime.RequiredError(
                'nodeId',
                'Required parameter "nodeId" was null or undefined when calling downloadBackup().'
            );
        }

        if (requestParameters['date'] == null) {
            throw new runtime.RequiredError(
                'date',
                'Required parameter "date" was null or undefined when calling downloadBackup().'
            );
        }

        const queryParameters: any = {};

        const headerParameters: runtime.HTTPHeaders = {};

        if (this.configuration && this.configuration.accessToken) {
            const token = this.configuration.accessToken;
            const tokenString = await token("HTTPBearer", []);

            if (tokenString) {
                headerParameters["Authorization"] = `Bearer ${tokenString}`;
            }
        }

        let urlPath = `/api/backups/{node_id}/{date}/download`;
        urlPath = urlPath.replace(`{${"node_id"}}`, encodeURIComponent(String(requestParameters['nodeId'])));
        urlPath = urlPath.replace(`{${"date"}}`, encodeURIComponent(String(requestParameters['date'])));

        const response = await this.request({
            path: urlPath,
            method: 'GET',
            headers: headerParameters,
            query: queryParameters,
        }, initOverrides);

        if (this.isJsonMime(response.headers.get('content-type'))) {
            return new runtime.JSONApiResponse<string>(response);
        } else {
            return new runtime.TextApiResponse(response) as any;
        }
    }

    /**
     */
    async downloadBackup(requestParameters: DownloadBackupRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<string> {
        const response = await this.downloadBackupRaw(requestParameters, initOverrides);
        return await response.value();
    }

    /**
     */
    async exportAppSettingsRaw(initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<string>> {
        const queryParameters: any = {};

        const headerParameters: runtime.HTTPHeaders = {};

        if (this.configuration && this.configuration.accessToken) {
            const token = this.configuration.accessToken;
            const tokenString = await token("HTTPBearer", []);

            if (tokenString) {
                headerParameters["Authorization"] = `Bearer ${tokenString}`;
            }
        }

        let urlPath = `/api/backups/app-settings/export`;

        const response = await this.request({
            path: urlPath,
            method: 'GET',
            headers: headerParameters,
            query: queryParameters,
        }, initOverrides);

        if (this.isJsonMime(response.headers.get('content-type'))) {
            return new runtime.JSONApiResponse<string>(response);
        } else {
            return new runtime.TextApiResponse(response) as any;
        }
    }

    /**
     */
    async exportAppSettings(initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<string> {
        const response = await this.exportAppSettingsRaw(initOverrides);
        return await response.value();
    }

    /**
     */
    async exportDatabaseRaw(requestParameters: ExportDatabaseRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<string>> {
        const queryParameters: any = {};

        if (requestParameters['format'] != null) {
            queryParameters['format'] = requestParameters['format'];
        }

        if (requestParameters['scope'] != null) {
            queryParameters['scope'] = requestParameters['scope'];
        }

        const headerParameters: runtime.HTTPHeaders = {};

        if (this.configuration && this.configuration.accessToken) {
            const token = this.configuration.accessToken;
            const tokenString = await token("HTTPBearer", []);

            if (tokenString) {
                headerParameters["Authorization"] = `Bearer ${tokenString}`;
            }
        }

        let urlPath = `/api/backups/database/export`;

        const response = await this.request({
            path: urlPath,
            method: 'GET',
            headers: headerParameters,
            query: queryParameters,
        }, initOverrides);

        if (this.isJsonMime(response.headers.get('content-type'))) {
            return new runtime.JSONApiResponse<string>(response);
        } else {
            return new runtime.TextApiResponse(response) as any;
        }
    }

    /**
     */
    async exportDatabase(requestParameters: ExportDatabaseRequest = {}, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<string> {
        const response = await this.exportDatabaseRaw(requestParameters, initOverrides);
        return await response.value();
    }

    /**
     */
    async getRetentionRaw(initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<RetentionConfigResponse>> {
        const queryParameters: any = {};

        const headerParameters: runtime.HTTPHeaders = {};

        if (this.configuration && this.configuration.accessToken) {
            const token = this.configuration.accessToken;
            const tokenString = await token("HTTPBearer", []);

            if (tokenString) {
                headerParameters["Authorization"] = `Bearer ${tokenString}`;
            }
        }

        let urlPath = `/api/backups/retention`;

        const response = await this.request({
            path: urlPath,
            method: 'GET',
            headers: headerParameters,
            query: queryParameters,
        }, initOverrides);

        return new runtime.JSONApiResponse(response, (jsonValue) => RetentionConfigResponseFromJSON(jsonValue));
    }

    /**
     */
    async getRetention(initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<RetentionConfigResponse> {
        const response = await this.getRetentionRaw(initOverrides);
        return await response.value();
    }

    /**
     */
    async importAppSettingsRaw(requestParameters: ImportAppSettingsRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<AppSettingsImportResponse>> {
        if (requestParameters['appSettingsBundle'] == null) {
            throw new runtime.RequiredError(
                'appSettingsBundle',
                'Required parameter "appSettingsBundle" was null or undefined when calling importAppSettings().'
            );
        }

        const queryParameters: any = {};

        const headerParameters: runtime.HTTPHeaders = {};

        headerParameters['Content-Type'] = 'application/json';

        if (this.configuration && this.configuration.accessToken) {
            const token = this.configuration.accessToken;
            const tokenString = await token("HTTPBearer", []);

            if (tokenString) {
                headerParameters["Authorization"] = `Bearer ${tokenString}`;
            }
        }

        let urlPath = `/api/backups/app-settings/import`;

        const response = await this.request({
            path: urlPath,
            method: 'POST',
            headers: headerParameters,
            query: queryParameters,
            body: AppSettingsBundleToJSON(requestParameters['appSettingsBundle']),
        }, initOverrides);

        return new runtime.JSONApiResponse(response, (jsonValue) => AppSettingsImportResponseFromJSON(jsonValue));
    }

    /**
     */
    async importAppSettings(requestParameters: ImportAppSettingsRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<AppSettingsImportResponse> {
        const response = await this.importAppSettingsRaw(requestParameters, initOverrides);
        return await response.value();
    }

    /**
     */
    async listBackupsRaw(initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<Array<BackupSummary>>> {
        const queryParameters: any = {};

        const headerParameters: runtime.HTTPHeaders = {};

        if (this.configuration && this.configuration.accessToken) {
            const token = this.configuration.accessToken;
            const tokenString = await token("HTTPBearer", []);

            if (tokenString) {
                headerParameters["Authorization"] = `Bearer ${tokenString}`;
            }
        }

        let urlPath = `/api/backups`;

        const response = await this.request({
            path: urlPath,
            method: 'GET',
            headers: headerParameters,
            query: queryParameters,
        }, initOverrides);

        return new runtime.JSONApiResponse(response, (jsonValue) => jsonValue.map(BackupSummaryFromJSON));
    }

    /**
     */
    async listBackups(initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<Array<BackupSummary>> {
        const response = await this.listBackupsRaw(initOverrides);
        return await response.value();
    }

    /**
     */
    async listBackupsForNodeRaw(requestParameters: ListBackupsForNodeRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<BackupSummary>> {
        if (requestParameters['nodeId'] == null) {
            throw new runtime.RequiredError(
                'nodeId',
                'Required parameter "nodeId" was null or undefined when calling listBackupsForNode().'
            );
        }

        const queryParameters: any = {};

        const headerParameters: runtime.HTTPHeaders = {};

        if (this.configuration && this.configuration.accessToken) {
            const token = this.configuration.accessToken;
            const tokenString = await token("HTTPBearer", []);

            if (tokenString) {
                headerParameters["Authorization"] = `Bearer ${tokenString}`;
            }
        }

        let urlPath = `/api/backups/{node_id}`;
        urlPath = urlPath.replace(`{${"node_id"}}`, encodeURIComponent(String(requestParameters['nodeId'])));

        const response = await this.request({
            path: urlPath,
            method: 'GET',
            headers: headerParameters,
            query: queryParameters,
        }, initOverrides);

        return new runtime.JSONApiResponse(response, (jsonValue) => BackupSummaryFromJSON(jsonValue));
    }

    /**
     */
    async listBackupsForNode(requestParameters: ListBackupsForNodeRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<BackupSummary> {
        const response = await this.listBackupsForNodeRaw(requestParameters, initOverrides);
        return await response.value();
    }

    /**
     */
    async recentRestoresRaw(initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<Array<any>>> {
        const queryParameters: any = {};

        const headerParameters: runtime.HTTPHeaders = {};

        if (this.configuration && this.configuration.accessToken) {
            const token = this.configuration.accessToken;
            const tokenString = await token("HTTPBearer", []);

            if (tokenString) {
                headerParameters["Authorization"] = `Bearer ${tokenString}`;
            }
        }

        let urlPath = `/api/restores/recent`;

        const response = await this.request({
            path: urlPath,
            method: 'GET',
            headers: headerParameters,
            query: queryParameters,
        }, initOverrides);

        return new runtime.JSONApiResponse<any>(response);
    }

    /**
     */
    async recentRestores(initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<Array<any>> {
        const response = await this.recentRestoresRaw(initOverrides);
        return await response.value();
    }

    /**
     */
    async restoreBackupRaw(requestParameters: RestoreBackupRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<RestoreResponse>> {
        if (requestParameters['restoreRequest'] == null) {
            throw new runtime.RequiredError(
                'restoreRequest',
                'Required parameter "restoreRequest" was null or undefined when calling restoreBackup().'
            );
        }

        const queryParameters: any = {};

        const headerParameters: runtime.HTTPHeaders = {};

        headerParameters['Content-Type'] = 'application/json';


        let urlPath = `/api/restore`;

        const response = await this.request({
            path: urlPath,
            method: 'POST',
            headers: headerParameters,
            query: queryParameters,
            body: RestoreRequestToJSON(requestParameters['restoreRequest']),
        }, initOverrides);

        return new runtime.JSONApiResponse(response, (jsonValue) => RestoreResponseFromJSON(jsonValue));
    }

    /**
     */
    async restoreBackup(requestParameters: RestoreBackupRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<RestoreResponse> {
        const response = await this.restoreBackupRaw(requestParameters, initOverrides);
        return await response.value();
    }

    /**
     */
    async runBackupsRaw(initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<BackupRunResponse>> {
        const queryParameters: any = {};

        const headerParameters: runtime.HTTPHeaders = {};


        let urlPath = `/api/backups/run`;

        const response = await this.request({
            path: urlPath,
            method: 'POST',
            headers: headerParameters,
            query: queryParameters,
        }, initOverrides);

        return new runtime.JSONApiResponse(response, (jsonValue) => BackupRunResponseFromJSON(jsonValue));
    }

    /**
     */
    async runBackups(initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<BackupRunResponse> {
        const response = await this.runBackupsRaw(initOverrides);
        return await response.value();
    }

    /**
     */
    async updateRetentionRaw(requestParameters: UpdateRetentionRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<RetentionConfigResponse>> {
        if (requestParameters['retentionUpdateRequest'] == null) {
            throw new runtime.RequiredError(
                'retentionUpdateRequest',
                'Required parameter "retentionUpdateRequest" was null or undefined when calling updateRetention().'
            );
        }

        const queryParameters: any = {};

        const headerParameters: runtime.HTTPHeaders = {};

        headerParameters['Content-Type'] = 'application/json';


        let urlPath = `/api/backups/retention`;

        const response = await this.request({
            path: urlPath,
            method: 'PUT',
            headers: headerParameters,
            query: queryParameters,
            body: RetentionUpdateRequestToJSON(requestParameters['retentionUpdateRequest']),
        }, initOverrides);

        return new runtime.JSONApiResponse(response, (jsonValue) => RetentionConfigResponseFromJSON(jsonValue));
    }

    /**
     */
    async updateRetention(requestParameters: UpdateRetentionRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<RetentionConfigResponse> {
        const response = await this.updateRetentionRaw(requestParameters, initOverrides);
        return await response.value();
    }

}
