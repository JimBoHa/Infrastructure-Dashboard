# RUN-20260118 — Tier A — CS-83 + DW-142 + DW-143 (0.1.9.150)

> **IMPORTANT (2026-01-17):** CS-83’s Open‑Meteo backfill approach was later reverted due to data-integrity policy. The current correct behavior is tracked as **CS‑84** (run: `project_management/runs/RUN-20260117-tier-a-cs84-ws-pressure-integrity-0.1.9.151.md`).

Tier A validation on the installed controller after:

- **CS-83:** WS-2902 pressure trends are reliable even when station uploads omit pressure (`baromin=-9999`).
- **DW-142:** Color-coded node type badges shown next to node titles across key tabs.
- **DW-143:** Sensors & Outputs does **not** auto-expand a node on navigation (user-driven expansion only).

## Upgrade / refresh (installed controller)

- Built bundle:
  - `/Users/Shared/FarmDashboardBuilds/FarmDashboardController-0.1.9.150.dmg`
  - `cargo run --manifest-path apps/farmctl/Cargo.toml -- bundle --version 0.1.9.150 --output /Users/Shared/FarmDashboardBuilds/FarmDashboardController-0.1.9.150.dmg --native-deps /usr/local/farm-dashboard/native`
- Set setup-daemon bundle path:
  - `curl -fsS -X POST http://127.0.0.1:8800/api/config -H 'Content-Type: application/json' -d '{"bundle_path":"/Users/Shared/FarmDashboardBuilds/FarmDashboardController-0.1.9.150.dmg"}'`
- Upgrade:
  - `curl -fsS -X POST http://127.0.0.1:8800/api/upgrade`
- Health checks:
  - `curl -fsS http://127.0.0.1:8000/healthz` (ok)
  - `curl -fsS http://127.0.0.1:8800/api/status` (reports `current_version: 0.1.9.150`)

## Evidence (Tier A)

Screenshots captured + viewed (folder: `manual_screenshots_web/tier_a_0.1.9.150_cs83_dw142_dw143/`):

- Nodes tab shows badges on node cards:
  - `manual_screenshots_web/tier_a_0.1.9.150_cs83_dw142_dw143/nodes.png`
- Sensors & Outputs shows badges and no default expansion:
  - `manual_screenshots_web/tier_a_0.1.9.150_cs83_dw142_dw143/sensors.png`
- Trends sensor picker shows badges and WS-2902 pressure charts:
  - `manual_screenshots_web/tier_a_0.1.9.150_cs83_dw142_dw143/trends.png`
  - `manual_screenshots_web/tier_a_0.1.9.150_cs83_dw142_dw143/trends_ws2902_barometric_pressure.png`
- Map Devices panel shows badges:
  - `manual_screenshots_web/tier_a_0.1.9.150_cs83_dw142_dw143/map.png`

## Notes

- The WS-2902 station is currently uploading with `baromin=-9999` (missing pressure). The controller now backfills the WS-2902 “Barometric pressure” sensor with Open-Meteo `pressure_msl_kpa` points when available so Trends can graph it.
- Node type detection uses `node.config` (core / ws-2902 / emporia / pi5) and shows a compact pill next to the node title.
